# 변동성완화장치발동종목요청

## TR 코드: ka10026

## Python 코드

```python
### Header

| Element | 한글명 | Type | Required | Length | Description |
|---------|--------|------|----------|---------|-------------|
| authorization | 접근토큰 | String | Y | 1000 | 토큰 지정시 토큰타입("Bearer") 붙혀서 호출 |
| cont-yn | 연속조회여부 | String | N | 1 | 응답 Header의 연속조회여부값이 Y일 경우 다음데이터 요청시 응답 Header의 cont-yn값 세팅 |
| next-key | 연속조회키 | String | N | 50 | 응답 Header의 연속조회여부값이 Y일 경우 다음데이터 요청시 응답 Header의 next-key값 세팅 |
| api-id | TR명 | String | Y | 10 |  |

### Body

| Element | 한글명 | Type | Required | Length | Description |
|---------|--------|------|----------|---------|-------------|
| mrkt_tp | 시장구분 | String | Y | 3 | 000:전체, 001: 코스피, 101:코스닥 |
| bf_mkrt_tp | 장전구분 | String | Y | 1 | 0:전체, 1:정규시장,2:시간외단일가 |
| stk_cd | 종목코드 | String | N | 20 | 거래소별 종목코드 |
| motn_tp | 발동구분 | String | Y | 1 | 0:전체, 1:정적VI, 2:동적VI, 3:동적VI + 정적VI |
| skip_stk | 제외종목 | String | Y | 9 | 전종목포함 조회시 9개 0으로 설정(000000000),전종목제외 조회시 9개 1으로 설정(111111111),9개 종목조회여부를 조회포함(0), 조회제외(1)로 설정하며 종목순서는 우선주,관리종목,투자경고/위험,투자주의,환기종목,단기과열종목,증거금100%,ETF,ETN가 됨.우선주만 조회시"011111111"", 관리종목만 조회시 ""101111111"" 설정" |
| trde_qty_tp | 거래량구분 | String | Y | 1 | 0:사용안함, 1:사용 |
| min_trde_qty | 최소거래량 | String | Y | 12 | 0 주 이상, 거래량구분이 1일때만 입력(공백허용) |
| max_trde_qty | 최대거래량 | String | Y | 12 | 100000000 주 이하, 거래량구분이 1일때만 입력(공백허용) |
| trde_prica_tp | 거래대금구분 | String | Y | 1 | 0:사용안함, 1:사용 |
| min_trde_prica | 최소거래대금 | String | Y | 10 | 0 백만원 이상, 거래대금구분 1일때만 입력(공백허용) |
| max_trde_prica | 최대거래대금 | String | Y | 10 | 100000000 백만원 이하, 거래대금구분 1일때만 입력(공백허용) |
| motn_drc | 발동방향 | String | Y | 1 | 0:전체, 1:상승, 2:하락 |
| stex_tp | 거래소구분 | String | Y | 1 | 1:KRX, 2:NXT 3.통합 |
import requests
import json

# 변동성완화장치발동종목요청
def fn_ka10054(token, data, cont_yn='N', next_key=''):
	# 1. 요청할 API URL
	#host = 'https://mockapi.kiwoom.com' # 모의투자
	host = 'https://api.kiwoom.com' # 실전투자
	endpoint = '/api/dostk/stkinfo'
	url =  host + endpoint

	# 2. header 데이터
	headers = {
		'Content-Type': 'application/json;charset=UTF-8', # 컨텐츠타입
		'authorization': f'Bearer {token}', # 접근토큰
		'cont-yn': cont_yn, # 연속조회여부
		'next-key': next_key, # 연속조회키
		'api-id': 'ka10054', # TR명
	}

	# 3. http POST 요청
	response = requests.post(url, headers=headers, json=data)

	# 4. 응답 상태 코드와 데이터 출력
	print('Code:', response.status_code)
	print('Header:', json.dumps({key: response.headers.get(key) for key in ['next-key', 'cont-yn', 'api-id']}, indent=4, ensure_ascii=False))
	print('Body:', json.dumps(response.json(), indent=4, ensure_ascii=False))  # JSON 응답을 파싱하여 출력

# 실행 구간
if __name__ == '__main__':
	# 1. 토큰 설정
	MY_ACCESS_TOKEN = '사용자 AccessToken'# 접근토큰

	# 2. 요청 데이터
	params = {
		'mrkt_tp': '000', # 시장구분 000:전체, 001: 코스피, 101:코스닥
		'bf_mkrt_tp': '0', # 장전구분 0:전체, 1:정규시장,2:시간외단일가
		'stk_cd': '', # 종목코드 거래소별 종목코드 (KRX:039490,NXT:039490_NX,SOR:039490_AL)  공백입력시 시장구분으로 설정한 전체종목조회
		'motn_tp': '0', # 발동구분 0:전체, 1:정적VI, 2:동적VI, 3:동적VI + 정적VI
		'skip_stk': '000000000', # 제외종목 전종목포함 조회시 9개 0으로 설정(000000000),전종목제외 조회시 9개 1으로 설정(111111111),9개 종목조회여부를 조회포함(0), 조회제외(1)로 설정하며 종목순서는 우선주,관리종목,투자경고/위험,투자주의,환기종목,단기과열종목,증거금100%,ETF,ETN가 됨.우선주만 조회시"011111111"", 관리종목만 조회시 ""101111111"" 설정"
		'trde_qty_tp': '0', # 거래량구분 0:사용안함, 1:사용
		'min_trde_qty': '0', # 최소거래량 0 주 이상, 거래량구분이 1일때만 입력(공백허용)
		'max_trde_qty': '0', # 최대거래량 100000000 주 이하, 거래량구분이 1일때만 입력(공백허용)
		'trde_prica_tp': '0', # 거래대금구분 0:사용안함, 1:사용
		'min_trde_prica': '0', # 최소거래대금 0 백만원 이상, 거래대금구분 1일때만 입력(공백허용)
		'max_trde_prica': '0', # 최대거래대금 100000000 백만원 이하, 거래대금구분 1일때만 입력(공백허용)
		'motn_drc': '0', # 발동방향 0:전체, 1:상승, 2:하락
		'stex_tp': '3', # 거래소구분 1:KRX, 2:NXT 3.통합
	}

	# 3. API 실행
	fn_ka10054(token=MY_ACCESS_TOKEN, data=params)

	# next-key, cont-yn 값이 있을 경우
	# fn_ka10054(token=MY_ACCESS_TOKEN, data=params, cont_yn='Y', next_key='nextkey..')

Header
Element	한글명	type	Required	Length	Description
authorization	접근토큰	String	Y	1000	토큰 지정시 토큰타입("Bearer") 붙혀서 호출
예) Bearer Egicyx...
cont-yn	연속조회여부	String	N	1	응답 Header의 연속조회여부값이 Y일 경우 다음데이터 요청시 응답 Header의 cont-yn값 세팅
next-key	연속조회키	String	N	50	응답 Header의 연속조회여부값이 Y일 경우 다음데이터 요청시 응답 Header의 next-key값 세팅
api-id	TR명	String	Y	10	
Body
Element	한글명	type	Required	Length	Description
mrkt_tp	시장구분	String	Y	3	000:전체, 001: 코스피, 101:코스닥
bf_mkrt_tp	장전구분	String	Y	1	0:전체, 1:정규시장,2:시간외단일가
stk_cd	종목코드	String	N	20	거래소별 종목코드
(KRX:039490,NXT:039490_NX,SOR:039490_AL)
공백입력시 시장구분으로 설정한 전체종목조회
motn_tp	발동구분	String	Y	1	0:전체, 1:정적VI, 2:동적VI, 3:동적VI + 정적VI
skip_stk	제외종목	String	Y	9	전종목포함 조회시 9개 0으로 설정(000000000),전종목제외 조회시 9개 1으로 설정(111111111),9개 종목조회여부를 조회포함(0), 조회제외(1)로 설정하며 종목순서는 우선주,관리종목,투자경고/위험,투자주의,환기종목,단기과열종목,증거금100%,ETF,ETN가 됨.우선주만 조회시"011111111"", 관리종목만 조회시 ""101111111"" 설정"
trde_qty_tp	거래량구분	String	Y	1	0:사용안함, 1:사용
min_trde_qty	최소거래량	String	Y	12	0 주 이상, 거래량구분이 1일때만 입력(공백허용)
max_trde_qty	최대거래량	String	Y	12	100000000 주 이하, 거래량구분이 1일때만 입력(공백허용)
trde_prica_tp	거래대금구분	String	Y	1	0:사용안함, 1:사용
min_trde_prica	최소거래대금	String	Y	10	0 백만원 이상, 거래대금구분 1일때만 입력(공백허용)
max_trde_prica	최대거래대금	String	Y	10	100000000 백만원 이하, 거래대금구분 1일때만 입력(공백허용)
motn_drc	발동방향	String	Y	1	0:전체, 1:상승, 2:하락
stex_tp	거래소구분	String	Y	1	1:KRX, 2:NXT 3.통합
```


## 응답

### Header

| Element | 한글명 | Type | Required | Length | Description |
|---------|--------|------|----------|---------|-------------|
| cont-yn | 연속조회여부 | String | N | 1 | 다음 데이터가 있을시 Y값 전달 |
| next-key | 연속조회키 | String | N | 50 | 다음 데이터가 있을시 다음 키값 전달 |
| api-id | TR명 | String | Y | 10 |  |

### Body

| Element | 한글명 | Type | Required | Length | Description |
|---------|--------|------|----------|---------|-------------|
| motn_stk | 발동종목 | LIST | N |  |  |
| - stk_cd | 종목코드 | String | N | 20 |  |
| - stk_nm | 종목명 | String | N | 20 |  |
| - acc_trde_qty | 누적거래량 | String | N | 20 |  |
| - motn_pric | 발동가격 | String | N | 20 |  |
| - dynm_dispty_rt | 동적괴리율 | String | N | 20 |  |
| - trde_cntr_proc_time | 매매체결처리시각 | String | N | 20 |  |
| - virelis_time | VI해제시각 | String | N | 20 |  |
| - viaplc_tp | VI적용구분 | String | N | 20 |  |
| - dynm_stdpc | 동적기준가격 | String | N | 20 |  |
| - static_stdpc | 정적기준가격 | String | N | 20 |  |
| - static_dispty_rt | 정적괴리율 | String | N | 20 |  |
| - open_pric_pre_flu_rt | 시가대비등락률 | String | N | 20 |  |
| - vimotn_cnt | VI발동횟수 | String | N | 20 |  |
| - stex_tp | 거래소구분 | String | N | 20 |  |