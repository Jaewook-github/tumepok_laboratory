# 주식당일거래원 (0F)

## TR 정보
- **TR 코드**: 0F
- **TR 명**: 주식당일거래원
- **타입**: WebSocket 실시간 데이터
- **용도**: 주식 당일 거래원 정보 실시간 통신

## WebSocket 연결 및 실시간 데이터 수신

```python
import asyncio 
import websockets
import json

SOCKET_URL = 'wss://api.kiwoom.com:10000/api/dostk/websocket'
ACCESS_TOKEN = '사용자 AccessToken'

class WebSocketClient:
	def __init__(self, uri):
		self.uri = uri
		self.websocket = None
		self.connected = False
		self.keep_running = True

	async def connect(self):
		try:
			self.websocket = await websockets.connect(self.uri)
			self.connected = True
			param = {'trnm': 'LOGIN', 'token': ACCESS_TOKEN}
			await self.send_message(message=param)
		except Exception as e:
			print(f'Connection error: {e}')
			self.connected = False

	async def send_message(self, message):
		if not self.connected:
			await self.connect()
		if self.connected:
			if not isinstance(message, str):
				message = json.dumps(message)
			await self.websocket.send(message)

	async def receive_messages(self):
		while self.keep_running:
			try:
				response = json.loads(await self.websocket.recv())
				if response.get('trnm') == 'LOGIN':
					if response.get('return_code') == 0:
						print('로그인 성공')
				elif response.get('trnm') == 'PING':
					await self.send_message(response)
				else:
					print(f'거래원 데이터 수신: {response}')
			except websockets.ConnectionClosed:
				break

	async def run(self):
		await self.connect()
		await self.receive_messages()

async def main():
	client = WebSocketClient(SOCKET_URL)
	task = asyncio.create_task(client.run())
	
	await asyncio.sleep(1)
	await client.send_message({
		'trnm': 'REG',
		'grp_no': '1', 
		'refresh': '1',
		'data': [{'item': ['005930'], 'type': ['0F']}]
	})
	
	await task

if __name__ == '__main__':
	asyncio.run(main())
```

## 기능 설명
실시간으로 종목별 당일 거래원 정보를 수신합니다.