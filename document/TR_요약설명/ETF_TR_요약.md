# ETF TR 문서 요약

## 개요
ETF TR은 키움증권 REST API를 통해 ETF(Exchange Traded Fund) 관련 정보를 조회하고 분석하는 기능을 제공합니다. ETF 수익률, NAV(순자산가치), 추적오차, 괴리율 등 ETF 투자에 필요한 핵심 데이터를 실시간으로 확인할 수 있습니다.

## 주요 기능 분류

### 1. ETF 수익률 및 성과 분석

#### ka40001 - ETF수익률요청
- **목적**: ETF 기간별 수익률 조회
- **주요 파라미터**:
  - 종목코드
  - ETF 대상지수코드
  - 기간: 1주/1달/6개월/1년
- **제공 정보**:
  - ETF 수익률
  - 체결 수익률
  - 외인/기관 순매수 수량
- **활용**: 투자 성과 평가, 벤치마크 대비 수익률 분석

### 2. ETF 기본 정보

#### ka40002 - ETF종목정보요청
- **목적**: 특정 ETF 종목의 기본 정보 조회
- **제공 정보**:
  - 종목명
  - ETF 대상지수명
  - 원주가격
  - ETF/ETN 과세유형
- **활용**: ETF 기본 특성 파악

#### ka40004 - ETF전체시세요청
- **목적**: 조건별 ETF 전체 시세 조회
- **검색 조건**:
  - 과세유형: 비과세/보유기간과세/회사형/외국
  - NAV 대비: NAV > 전일종가, NAV < 전일종가
  - 운용사별: KODEX(삼성), KOSEF(키움), TIGER(미래에셋) 등
  - 거래소: KRX/NXT/통합
- **제공 정보**:
  - 현재가, 등락률, 거래량
  - NAV, 추적오차율
  - 과표기준, 배당정보
  - 추적지수 정보 및 등락률
- **활용**: ETF 스크리닝, 섹터별 분석

### 3. ETF 추이 분석

#### ka40003 - ETF일별추이요청
- **목적**: ETF 일별 가격 및 지표 추이
- **제공 정보**:
  - 일자별 현재가, 등락률
  - NAV 및 거래량
  - NAV/지수 괴리율
  - NAV/ETF 괴리율
  - 추적오차율
- **활용**: 중장기 추세 분석, 괴리율 패턴 파악

#### ka40006 - ETF시간대별추이요청
- **목적**: 장중 시간대별 ETF 추이
- **제공 정보**:
  - 시간별 종가, 등락률
  - NAV 변화
  - 거래량, 거래대금
  - 추적지수 대비 변화
- **활용**: 일중 변동성 분석, 단기 매매 타이밍

### 4. ETF 체결 정보

#### ka40007 - ETF시간대별체결요청
- **목적**: 시간대별 체결 내역 조회
- **활용**: 체결 강도 분석, 매수/매도 타이밍

#### ka40008 - ETF일자별체결요청
- **목적**: 일자별 체결 통계
- **활용**: 일별 거래 패턴 분석

### 5. ETF NAV 및 투자 지표

#### ka40009 - ETFNAV배열요청
- **목적**: ETF NAV 관련 상세 정보
- **제공 정보**:
  - NAV 및 전일대비
  - NAV 등락률
  - 추적오차율
  - 괴리율
  - 기준가, 대용가
  - 외인보유수량
  - 환산가격, DR/주, 원주가격
- **활용**: NAV 기반 가치 평가, 차익거래 기회 포착

#### ka40010 - ETF순매수배열요청
- **목적**: 투자자별 순매수 동향
- **활용**: 수급 분석, 기관/외국인 동향 파악

## 공통 사항

### API 설정
- **엔드포인트**: `/api/dostk/etf`
- **메서드**: POST
- **인증**: Bearer 토큰 필요
- **서버**:
  - 실전: `https://api.kiwoom.com`
  - 모의: `https://mockapi.kiwoom.com`

### 주요 운용사 코드
- 3020: KODEX (삼성자산운용)
- 3027: KOSEF (키움투자자산운용)
- 3191: TIGER (미래에셋자산운용)
- 3228: KINDEX (한국투자신탁운용)
- 3023: KStar (KB자산운용)
- 3022: 아리랑 (한화자산운용)

### 과세 유형
- 1: 비과세
- 2: 보유기간과세
- 3: 회사형
- 4: 외국
- 5: 비과세해외(보유기간과세)

## ETF 투자 전략 활용

### 1. 추적오차 활용 전략
- **추적오차율 모니터링**: ka40003, ka40009 활용
- **낮은 추적오차 ETF 선호**: 지수 추종 성과 우수
- **추적오차 확대 시점 포착**: 차익거래 기회

### 2. 괴리율 활용 전략
- **NAV 대비 괴리율 분석**: ka40009 활용
- **할인 거래 ETF 매수**: 괴리율 마이너스 시
- **프리미엄 시 매도**: 괴리율 플러스 과도 시

### 3. 섹터 로테이션 전략
- **운용사별 ETF 비교**: ka40004 활용
- **추적지수별 성과 분석**: 섹터 강세/약세 판단
- **테마 ETF 발굴**: 신성장 산업 ETF 투자

### 4. 수급 분석 전략
- **외국인/기관 순매수**: ka40001, ka40010 활용
- **대량 순매수 ETF 추종**: 스마트머니 따라가기
- **순매도 전환 시점**: 매도 신호

## 시스템 연계 활용

### 1. 섹터 ETF 활용
- 투매폭으로 포착한 급등 섹터의 ETF 매수
- 개별종목 대신 섹터 ETF로 리스크 분산

### 2. 인버스/레버리지 ETF 활용
- 시장 하락 예상 시 인버스 ETF 매수
- 강한 상승 확신 시 레버리지 ETF 활용

### 3. 포트폴리오 구성
- 개별종목 + ETF 조합으로 안정성 제고
- 코어(ETF) + 위성(개별종목) 전략

### 4. 헤지 전략
- 투매폭 매수 포지션의 헤지용 인버스 ETF
- 섹터 ETF로 시장 리스크 관리

## 주요 지표 해석

### NAV (Net Asset Value)
- **정의**: ETF가 보유한 자산의 순가치
- **계산**: (총자산 - 총부채) / 발행주식수
- **활용**: 실제 가치 대비 시장가격 평가

### 추적오차율
- **정의**: ETF 수익률과 추적지수 수익률의 차이
- **계산**: 표준편차(ETF 수익률 - 지수 수익률)
- **평가**: 낮을수록 우수한 ETF

### 괴리율
- **정의**: 시장가격과 NAV의 차이 비율
- **계산**: (시장가격 - NAV) / NAV × 100
- **의미**: 
  - 양(+): 프리미엄 거래
  - 음(-): 할인 거래

## 투자 시 주의사항

### 거래 비용
- 매매수수료: 증권사별 상이
- 운용보수: 연 0.05~1.0% 수준
- 기타비용: 지수사용료, 보관비용 등

### 추적오차 요인
- 운용보수 및 비용
- 현금 보유 (배당금 등)
- 리밸런싱 시차
- 세금 효과

### 괴리율 발생 원인
- 수급 불균형
- LP(유동성공급자) 부재
- 장 마감 시점 차이 (해외 ETF)
- 구성종목 거래정지

## 구현 시 고려사항

### 데이터 갱신 주기
- 실시간: 장중 NAV, 괴리율
- 1분 단위: 시간대별 추이
- 일 단위: 추적오차율, 수익률

### API 호출 최적화
- 연속조회 기능 활용
- 필요 데이터만 선택적 조회
- 캐싱 전략 구현

### 운용사별 특성 반영
- 각 운용사의 ETF 특징 파악
- 동일 지수 추종 ETF 간 비교
- 운용 스타일 차이 고려