# 접근토큰 폐기

## TR 코드: AU10002

## 개요
- **기능**: 발급받은 접근토큰을 폐기/무효화
- **엔드포인트**: `/oauth2/revoke`
- **메서드**: POST

## Python 코드

```python
import requests
import json

# 접근토큰 폐기
def fn_au10002(data):
	# 1. 요청할 API URL
	#host = 'https://mockapi.kiwoom.com' # 모의투자
	host = 'https://api.kiwoom.com' # 실전투자
	endpoint = '/oauth2/revoke'
	url =  host + endpoint

	# 2. header 데이터
	headers = {
		'Content-Type': 'application/json;charset=UTF-8', # 컨텐츠타입
	}

	# 3. http POST 요청
	response = requests.post(url, headers=headers, json=data)

	# 4. 응답 상태 코드와 데이터 출력
	print('Code:', response.status_code)
	print('Header:', json.dumps({key: response.headers.get(key) for key in ['next-key', 'cont-yn', 'api-id']}, indent=4, ensure_ascii=False))
	print('Body:', json.dumps(response.json(), indent=4, ensure_ascii=False))  # JSON 응답을 파싱하여 출력

# 실행 구간
if __name__ == '__main__':
	# 1. 요청 데이터
	params = {
		'appkey': 'AxserEsdcredca.....',  # 앱키
		'secretkey': 'SEefdcwcforehDre2fdvc....',  # 시크릿키
		'token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...',  # 접근토큰
	}

	# 2. API 실행
	fn_au10002(data=params)
```

## 요청

### Body

| Element | 한글명 | Type | Required | Length | Description |
|---------|--------|------|----------|---------|-------------|
| appkey | 앱키 | String | Y | | 개발자센터에서 발급받은 앱키 |
| secretkey | 시크릿키 | String | Y | | 개발자센터에서 발급받은 시크릿키 |
| token | 접근토큰 | String | Y | | 폐기할 접근토큰 |

## 응답

### Body

응답 시 특별한 Body 데이터는 없으며, HTTP 상태 코드로 성공/실패를 판단합니다.

- **200**: 성공적으로 토큰이 폐기됨
- **400**: 잘못된 요청 (필수 파라미터 누락 등)
- **401**: 인증 실패 (잘못된 앱키/시크릿키)

## 사용 예시

### 요청 예시

```json
{
    "appkey": "AxserEsdcredca.....",
    "secretkey": "SEefdcwcforehDre2fdvc....",
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}
```

### 응답 예시

```json
{
    "result": "success"
}
```

## 참고사항

- **사용 목적**: 보안상 토큰 사용 완료 후 명시적으로 폐기
- **토큰 상태**: 폐기된 토큰은 즉시 사용 불가능
- **자동 만료**: 24시간 후 자동으로 만료되므로 반드시 폐기할 필요는 없음
- **보안 권장사항**: 애플리케이션 종료 시 토큰 폐기 권장